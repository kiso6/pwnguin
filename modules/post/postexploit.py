import subprocess
import random as rng

def openCtrlSrv(bindaddr="0.0.0.0"):
    port = rng.randint(5000, 65535)
    cmd = "python3 -m http.server -d . -b " + bindaddr+" "+str(port)+"& > /dev/null"
    print(cmd)
    proc = subprocess.run(cmd,shell=True)
    if proc:
        print("Opened control server @ " + bindaddr+":"+str(port))
        return (proc,port)
    else:
        print("Failed to open control server")
        exit(-500)



# (serv,port) =  openCtrlSrv("192.168.1.86")